(function(a){function i(a){try{return JSON.parse(a)}catch(b){return{}}}function l(a,b){var c=document.createElement("iframe");return c.src=a,c.name=e(b),c.setAttribute("style","position:absolute;top:0;left:-100px;width:1px;height:1px"),c}var b=a.Mockie,c=a.Mockie={};c.noConflict=function(){return a.Mockie=b,c};var d=":mockie:",e=c.buildPayload=function(a){return d+JSON.stringify(a)},f=document.getElementsByTagName("script"),g=c.element=f[f.length-1],h=g.parentElement;Mockie.config=i(g.innerHTML);var j=a.name.search(d);if(j==-1)c.payload={};else{var k=a.name.substring(j+d.length);c.payload=i(k)}c.expose=function(b){if(c.payload.request){var d=c.payload.request;throw d.args.push(function(a){h.appendChild(l(d.caller,{id:c.payload.id,response:a}))}),b[d.name].apply(a,d.args),a.onerror=function(){return!0},""}if(c.payload.response){var e=a.parent.parent;e.MOCKIE_RECEIVE(c.payload.id,c.payload.response),a.location='javascript:""'}};var m={},n=0;a.MOCKIE_RECEIVE=function(a,b){m[a](null,b)},c.request=function(b,c,d,e){function k(a,b){if(i)return;i=!0,h.removeChild(j),delete m[f],e(a,b)}e||(e=d,d=[]);var f=n++,g={caller:a.location.toString(),name:c,args:d},i=!1,j=l(b,{id:f,request:g});setTimeout(function(){k("timeout")},3e3),m[f]=k,h.appendChild(j)}})(this);